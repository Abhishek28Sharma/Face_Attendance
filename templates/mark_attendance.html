<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mark Attendance | Live Kiosk</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-[#131314] text-gray-100 min-h-screen p-4 md:p-8">
  <audio id="successSound" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"
    preload="auto"></audio>
  <div class="max-w-6xl mx-auto">

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
      <div class="bg-[#1c1c1e] border border-gray-800 p-4 rounded-xl flex items-center justify-between">
        <div>
          <p class="text-[10px] uppercase text-gray-500 font-bold tracking-widest">Current Time</p>
          <h2 id="liveClock" class="text-2xl font-mono text-white">00:00:00</h2>
        </div>
        <div class="text-blue-500">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
      </div>

      <div class="bg-[#1c1c1e] border border-gray-800 p-4 rounded-xl flex items-center justify-between">
        <div>
          <p class="text-[10px] uppercase text-gray-500 font-bold tracking-widest">Active Session</p>
          <h2 id="activePeriodDisplay" class="text-xl font-bold text-blue-400">Detecting...</h2>
        </div>
        <div class="text-green-500">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
        </div>
      </div>
    </div>

    <div class="bg-[#1c1c1e] rounded-2xl shadow-2xl border border-gray-800 p-6 md:p-8">
      <div class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
        <div>
          <h4 class="text-2xl font-bold text-white tracking-tight">AI Kiosk Mode</h4>
          <p class="text-sm text-gray-400">Automatic period detection active. Just look at the camera.</p>
        </div>
        <div class="flex items-center gap-3">
          <a href="/"
            class="px-4 py-2 border border-gray-700 hover:bg-gray-800 text-gray-300 rounded-lg text-sm flex items-center gap-2">Back</a>
          <button id="startMarkBtn"
            class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold">Start Kiosk</button>
          <button id="stopMarkBtn" class="px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold"
            disabled>Stop</button>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
        <div class="lg:col-span-7 flex flex-col items-center">
          <div class="relative w-full aspect-video bg-black rounded-2xl overflow-hidden border-2 border-gray-800">
            <video id="markVideo" class="w-full h-full object-cover" autoplay muted></video>
            <div
              class="absolute bottom-4 left-4 bg-black/60 backdrop-blur-md px-4 py-1 rounded-full border border-white/10 text-xs">
              Status: <span id="markStatus" class="text-blue-400">Waiting...</span>
            </div>
          </div>
        </div>

        <div class="lg:col-span-5 flex flex-col h-full">
          <h6 class="text-sm font-bold text-gray-400 uppercase mb-4">Live Logs</h6>
          <div class="flex-grow bg-[#131314] rounded-xl border border-gray-800 overflow-hidden">
            <ul id="recognizedList" class="divide-y divide-gray-800 max-h-[400px] overflow-y-auto custom-scrollbar">
              <li class="p-8 text-center text-gray-600 italic text-sm">No students detected yet...</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='js/camera_mark.js') }}"></script>
</body>

</html>