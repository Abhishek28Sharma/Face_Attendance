<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mark Attendance | Live</title>

  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-[#131314] text-gray-100 min-h-screen p-4 md:p-8">

  <div class="max-w-6xl mx-auto">

    <div class="bg-[#1c1c1e] rounded-2xl shadow-2xl border border-gray-800 p-6 md:p-8">

      <div class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
        <div>
          <h4 class="text-2xl font-bold text-white tracking-tight">Mark Attendance</h4>
          <p class="text-sm text-gray-400">Position the student in front of the camera for AI recognition.</p>
        </div>

        <div class="flex items-center gap-3">
          <a href="/"
            class="px-4 py-2 bg-transparent border border-gray-700 hover:bg-gray-800 text-gray-300 rounded-lg font-medium transition duration-200 text-sm flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
            Back
          </a>

          <button id="startMarkBtn"
            class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition duration-200 shadow-lg shadow-blue-900/20">
            Start Camera
          </button>

          <button id="stopMarkBtn"
            class="px-6 py-2 bg-red-600 hover:bg-red-700 disabled:opacity-30 disabled:cursor-not-allowed text-white rounded-lg font-semibold transition duration-200"
            disabled>
            Stop
          </button>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">

        <div class="lg:col-span-7 flex flex-col items-center">
          <div
            class="relative w-full aspect-video bg-black rounded-2xl overflow-hidden border-2 border-gray-800 shadow-inner">
            <video id="markVideo" class="w-full h-full object-cover" autoplay muted></video>

            <div
              class="absolute bottom-4 left-4 bg-black/60 backdrop-blur-md px-4 py-1 rounded-full border border-white/10 text-xs font-mono">
              System Status: <span id="markStatus" class="text-blue-400">Waiting...</span>
            </div>
          </div>

          <div class="mt-4 flex items-center gap-2 text-gray-500 text-xs uppercase tracking-widest font-bold">
            <span class="flex h-2 w-2 rounded-full bg-blue-500 animate-pulse"></span>
            Live AI Processing Active
          </div>
        </div>

        <div class="lg:col-span-5 flex flex-col h-full">
          <div class="flex items-center justify-between mb-4">
            <h6 class="text-sm font-bold text-gray-400 uppercase tracking-wider">Recognized (Current Session)</h6>
            <span
              class="bg-blue-900/30 text-blue-400 text-[10px] px-2 py-0.5 rounded border border-blue-800/50">Auto-Saving</span>
          </div>

          <div class="flex-grow bg-[#131314] rounded-xl border border-gray-800 overflow-hidden">
            <ul id="recognizedList" class="divide-y divide-gray-800 max-h-[400px] overflow-y-auto custom-scrollbar">
              <li class="p-8 text-center text-gray-600 italic text-sm">
                No students detected yet...
              </li>
            </ul>
          </div>

          <p class="mt-3 text-[11px] text-gray-500 text-center italic">
            Attendance is automatically logged to the database upon recognition.
          </p>
        </div>

      </div>
    </div>
  </div>

  <style>
    .custom-scrollbar::-webkit-scrollbar {
      width: 6px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
      background: transparent;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: #374151;
      border-radius: 10px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: #4b5563;
    }
  </style>

  <script src="{{ url_for('static', filename='js/camera_mark.js') }}"></script>
</body>

</html>